"object"==typeof Countries&&(Countries.updateProvinceLabel=function(a,b){if("string"==typeof a&&Countries[a]&&Countries[a].provinces){if("object"!=typeof b&&(b=document.getElementById("address_province_label"),null===b))return;b.innerHTML=Countries[a].label;var c=$(b).parent();c.find("select");c.find(".custom-style-select-box-inner").html(Countries[a].provinces[0])}}),"undefined"==typeof Shopify.Cart&&(Shopify.Cart={}),Shopify.Cart.ShippingCalculator=function(){var _config={submitButton:"Calculate shipping",submitButtonDisabled:"Calculating...",templateId:"shipping-calculator-response-template",wrapperId:"wrapper-response",customerIsLoggedIn:!1,moneyFormat:"$ {{amount}}"},_render=function(a){var b=jQuery("#"+_config.templateId),c=jQuery("#"+_config.wrapperId);if(b.length&&c.length&&(b.tmpl(a).appendTo(c),"undefined"!=typeof Currency&&"function"==typeof Currency.convertAll)){var d="";jQuery("[name=currencies]").size()?d=jQuery("[name=currencies]").val():jQuery("#currencies span.selected").size()&&(d=jQuery("#currencies span.selected").attr("data-currency")),""!==d&&Currency.convertAll(shopCurrency,d,"#wrapper-response span.money, #estimated-shipping em span.money")}},_enableButtons=function(){jQuery(".get-rates").removeAttr("disabled").removeClass("disabled").val(_config.submitButton)},_disableButtons=function(){jQuery(".get-rates").val(_config.submitButtonDisabled).attr("disabled","disabled").addClass("disabled")},_getCartShippingRatesForDestination=function(a){var b={type:"GET",url:"/cart/shipping_rates.json",data:jQuery.param({shipping_address:a}),dataType:"json",success:function(b){rates=b.shipping_rates,_onCartShippingRatesUpdate(rates,a)},error:function(a,b){_onError(a,b)}};jQuery.ajax(b)},_fullMessagesFromErrors=function(a){var b=[];return jQuery.each(a,function(a,c){jQuery.each(c,function(c,d){b.push(a+" "+d)})}),b},_onError=function(XMLHttpRequest,textStatus){jQuery("#estimated-shipping").hide(),jQuery("#estimated-shipping em").empty(),_enableButtons();var feedback="",data=eval("("+XMLHttpRequest.responseText+")");feedback=data.message?data.message+"("+data.status+"): "+data.description:"Error : "+_fullMessagesFromErrors(data).join("; "),"Error : country is not supported."===feedback&&(feedback="We do not ship to this destination."),_render({rates:[],errorFeedback:feedback,success:!1}),jQuery("#"+_config.wrapperId).show()},_onCartShippingRatesUpdate=function(a,b){_enableButtons();var c="";b.zip&&(c+=b.zip+", "),b.province&&(c+=b.province+", "),c+=b.country,a.length&&jQuery("#estimated-shipping em").html("0.00"==a[0].price?"FREE":_formatRate(a[0].price)),_render({rates:a,address:c,success:!0}),jQuery("#"+_config.wrapperId+", #estimated-shipping").fadeIn()},_formatRate=function(a){function b(a){return a.replace(/(\d+)(\d{3}[\.,]?)/,"$1,$2")}function c(a,b){var c=a.toFixed(b).toString();return c.match(/^\.\d+/)?"0"+c:c}"string"==typeof a&&(a=a.replace(".",""));var d="",e=/\{\{\s*(\w+)\s*\}\}/,f=_config.moneyFormat;switch(f.match(e)[1]){case"amount":d=b(c(a/100,2));break;case"amount_no_decimals":d=b(c(a/100,0));break;case"amount_with_comma_separator":d=c(a/100,2).replace(/\./,",");break;case"amount_no_decimals_with_comma_separator":d=b(c(a/100,0)).replace(/\./,",")}return f.replace(e,d)};return _init=function(){new Shopify.CountryProvinceSelector2("address_country","address_province",{hideElement:"address_province_container"});var a=jQuery("#address_country"),b=jQuery("#address_province_label").get(0);"undefined"!=typeof Countries&&(Countries.updateProvinceLabel(a.val(),b),a.change(function(){Countries.updateProvinceLabel(a.val(),b)})),jQuery(".get-rates").click(function(){_disableButtons(),jQuery("#"+_config.wrapperId).empty().hide();var a={};a.zip=jQuery("#address_zip").val()||"",a.country=jQuery("#address_country").val()||"",a.province=jQuery("#address_province").val()||"",_getCartShippingRatesForDestination(a)}),_config.customerIsLoggedIn&&jQuery(".get-rates:eq(0)").trigger("click")},{show:function(a){a=a||{},jQuery.extend(_config,a),jQuery(function(){_init()})},getConfig:function(){return _config},formatRate:function(a){return _formatRate(a)}}}();